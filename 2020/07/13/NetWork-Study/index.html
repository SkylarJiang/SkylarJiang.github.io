<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"skylarjiang.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="主要是基于五层原理体系的学习">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络学习笔记">
<meta property="og:url" content="https://skylarjiang.github.io/2020/07/13/NetWork-Study/index.html">
<meta property="og:site_name" content="YouAreBangBang">
<meta property="og:description" content="主要是基于五层原理体系的学习">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/image-20200713173424378.png">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/FCA17D68EE20F333887C7B07D2B2EE86.png">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/E2E3E4ECF15689664929B81007AEF7C5.png">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/%60$9FO4GU0%5D41_69H0ONLIP2.png">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/00C9A8E8FB3D41751D60281A2B86A1ED.png">
<meta property="og:image" content="c:%5CUsers%5Chz%5CAppData%5CRoaming%5CTencent%5CUsers%5C1440961573%5CQQ%5CWinTemp%5CRichOle%5CIHGNX3%5D$%7BD5">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/Q~F8M91%7D9R_W9KF%7BS@%7DQ63P.png">
<meta property="og:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/CBDBF118DBE19194ECE1F07499F15B20.png">
<meta property="og:image" content="c:/$DX2%5BGNJIWOER2%5D$ML%25L">
<meta property="article:published_time" content="2020-07-13T10:16:18.000Z">
<meta property="article:modified_time" content="2020-07-20T09:08:38.261Z">
<meta property="article:author" content="WongZit">
<meta property="article:tag" content="Network">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/image-20200713173424378.png">

<link rel="canonical" href="https://skylarjiang.github.io/2020/07/13/NetWork-Study/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>计算机网络学习笔记 | YouAreBangBang</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">YouAreBangBang</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">l like coding!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/skylarjiang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://skylarjiang.github.io/2020/07/13/NetWork-Study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WongZit">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouAreBangBang">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络学习笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-07-13 18:16" itemprop="dateCreated datePublished" datetime="2020-07-13T18:16:18+08:00">2020-07-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-20 17:08" itemprop="dateModified" datetime="2020-07-20T17:08:38+08:00">2020-07-20</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2020/07/13/NetWork-Study/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/13/NetWork-Study/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>主要是基于五层原理体系的学习</p>
<a id="more"></a>

<p><strong>目录</strong>：</p>
<!-- TOC -->

<ul>
<li><a href="#概述">概述</a><ul>
<li><a href="#一些术语和概念">一些术语和概念</a></li>
<li><a href="#三种交换方式">三种交换方式</a></li>
<li><a href="#比特速率单位及换算">比特、速率单位及换算</a></li>
<li><a href="#计算机网络体系的分层">计算机网络体系的分层</a></li>
</ul>
</li>
<li><a href="#物理层">物理层</a><ul>
<li><a href="#基本概念们">基本概念们</a></li>
<li><a href="#传输媒体">传输媒体</a></li>
<li><a href="#传输方式">传输方式</a></li>
<li><a href="#编码与调制">编码与调制</a><ul>
<li><a href="#常用编码">常用编码</a></li>
</ul>
</li>
<li><a href="#混合调制">混合调制</a></li>
<li><a href="#信道的极限容量">信道的极限容量</a></li>
</ul>
</li>
<li><a href="#数据链路层">数据链路层</a><ul>
<li><a href="#基本问题">基本问题</a><ul>
<li><a href="#封装成帧">封装成帧</a></li>
<li><a href="#差错检测">差错检测</a></li>
<li><a href="#可靠传输">可靠传输</a></li>
</ul>
</li>
<li><a href="#点对点协议ppppoint-to-point-protocol">点对点协议PPP（point-to-point protocol）</a></li>
<li><a href="#使用广播信道共享式局域网">使用广播信道（共享式局域网）</a><ul>
<li><a href="#媒体接入控制macmedium-access-control">媒体接入控制MAC(Medium Access Control)</a><ul>
<li><a href="#csmacd协议"><code>CSMA/CD</code>协议</a></li>
<li><a href="#csmaca协议"><code>CSMA/CA</code>协议</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mac-地址ip-地址apr-协议">MAC 地址、IP 地址、APR 协议</a></li>
<li><a href="#交换机">交换机</a></li>
<li><a href="#虚拟局域网-valn-概述">虚拟局域网 VALN 概述</a></li>
</ul>
</li>
<li><a href="#网络层">网络层</a><ul>
<li><a href="#概述-1">概述</a></li>
<li><a href="#网络层提供的两种服务">网络层提供的两种服务</a></li>
<li><a href="#ip地址">IP地址</a><ul>
<li><a href="#ipv4-地址概述">IPv4 地址概述</a></li>
<li><a href="#分类编制的ipv4">分类编制的IPv4</a></li>
<li><a href="#划分子网">划分子网</a></li>
<li><a href="#无分类编址的-ipv4-地址">无分类编址的 IPv4 地址</a></li>
<li><a href="#ipv4-地址的应用规划">IPv4 地址的应用规划</a></li>
</ul>
</li>
<li><a href="#ip-数据报的发送和转发过程">IP 数据报的发送和转发过程</a></li>
<li><a href="#静态路由配置及其可能产生的路由环路问题">静态路由配置及其可能产生的路由环路问题</a></li>
<li><a href="#路由选择协议">路由选择协议</a><ul>
<li><a href="#域内内部网关协议-igp">域内：内部网关协议 IGP</a></li>
<li><a href="#域间外部网关协议-egp边界网关协议-bgp">域间：外部网关协议 EGP（边界网关协议 BGP）</a></li>
</ul>
</li>
<li><a href="#ipv4数据报的首部格式">IPv4数据报的首部格式</a></li>
<li><a href="#网际控制报文协议-icmp">网际控制报文协议 ICMP</a></li>
<li><a href="#虚拟专用网-vpn-和网络地址转换-nat">虚拟专用网 VPN 和网络地址转换 NAT</a></li>
</ul>
</li>
<li><a href="#运输层">运输层</a><ul>
<li><a href="#运输层端口号复用与分用概念">运输层端口号、复用与分用概念</a></li>
<li><a href="#udp-和-tcp-的对比">UDP 和 TCP 的对比</a></li>
<li><a href="#tcp-的流量控制">TCP 的流量控制</a></li>
<li><a href="#tcp-的拥塞控制">TCP 的拥塞控制</a></li>
<li><a href="#tcp-超时重传时间的选择">TCP 超时重传时间的选择</a></li>
<li><a href="#tcp-的运输连接管理">TCP 的运输连接管理</a><ul>
<li><a href="#tcp-连接的建立">TCP 连接的建立</a><ul>
<li><a href="#三报文握手">三报文握手</a></li>
<li><a href="#四报文挥手">四报文挥手</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tcp-首部格式">TCP 首部格式</a></li>
</ul>
</li>
<li><a href="#应用层">应用层</a><ul>
<li><a href="#客户服务器方式cs和对等方式p2p">客户/服务器方式（C/S）和对等方式（P2P）</a></li>
<li><a href="#动态主机配置-dhcp">动态主机配置 DHCP</a></li>
<li><a href="#域名系统-dns">域名系统 DNS</a></li>
<li><a href="#文件传送协议-ftpfile-transfer-protocol">文件传送协议 FTP（File Transfer Protocol）</a></li>
<li><a href="#电子邮件">电子邮件</a></li>
<li><a href="#万维网">万维网</a><ul>
<li><a href="#url">URL</a></li>
<li><a href="#超文本传输协议-http-">*<em>超文本传输协议 HTTP *</em></a></li>
<li><a href="#cookie">Cookie</a></li>
<li><a href="#万维网缓存和代理服务器">万维网缓存和代理服务器</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="一些术语和概念"><a href="#一些术语和概念" class="headerlink" title="一些术语和概念"></a>一些术语和概念</h3><p><u>计算机网络</u>：一些互相连接的、自治的计算机的集合</p>
<p><u>网络（Network）</u>由若干节点（Node）和链接这些节点的链路（Link）组成</p>
<p><u>互联网</u>：多个网络由路由器互联起来，构成一个覆盖范围更大的网络</p>
<p><u>因特网</u>（Internet）：是一个专有名词，世界上最大的互联网络</p>
<p><u>主机</u>（host）</p>
<p><u>因特网服务提供者 ISP</u>（Internet Service Provider）：国内 ISP 为三大运用商（联通、电信、移动）普通用户向 ISP 缴纳费用就可以获得 IP 地址</p>
<p><u>RFC （Request For Comments）技术文档</u>：因特网在指定及其标准化工作上很大的特点就是面向公众，因特网所有的 RFC 文档都可以从因特网上免费下载，并可以随时提建议。</p>
<hr>
<p><u>广域网</u>（WAN）</p>
<p><u>城域网</u>（MAN）</p>
<p><u>局域网</u>（LAN）</p>
<p><u>个域网</u>（PAN）</p>
<hr>
<p><strong>计算机网络的性能指标</strong>：</p>
<p><u>速率</u>：连接在计算机网络上的主机在数字信道上传送比特的速率（比特率、数据率）</p>
<p><u>带宽</u>：在模拟信号中代表信号所包含的各种不同频率的成分所占据的频率范围；最高数据率</p>
<p><u>吞吐量</u>：单位时间内通过某个网络（或信道、接口）的数据量</p>
<p><u>时延</u>：发送时延、传播时延、处理时延</p>
<p><u>时延带宽积</u>：又称以比特为单位的链路长度，传播时延 * 带宽</p>
<p><u>往返时间</u> RTT（Round-Trip Time）：双向交互一次的时间</p>
<p><u>利用率</u>：信道利用率，网络利用率</p>
<p><u>丢包率</u>：分组丢失率。丢包可能因为分组在传播过程出现误码被节点丢弃；因为网络拥塞在分组交换机被丢弃</p>
<hr>
<p><u>实体</u>：任何可发送或接收信息的硬件或软件进程，对等实体指收发双方层次相同的实体</p>
<p><u>协议</u>：控制两个对等实体进行逻辑通信的规则集合</p>
<p>​    在协议的控制下，对等实体间的逻辑通信使得本层能够向上一层提供服务</p>
<p>​    下面的协议对上面的实体是“透明的” </p>
<p>​    同步：定义收发双方的时序关系；语法，语义</p>
<p><u>服务</u>：</p>
<p>​     - <u>服务访问点</u>：相邻两层的实体交换信息的逻辑接口，</p>
<p>​             - 数据链路层的服务访问点为帧“类型”字段；</p>
<p>​             - 运输层  ==&gt;  “端口号” ； 网络层  ==&gt; IP数据报首部中的“协议字段”</p>
<p>​     - <u>服务原语</u>：上层使用下层所提供的服务必须与下层交换一些命令，这些命令称为 ##</p>
<p>协议数据单元 PDU：对等实体之间传输的数据包称为该层的协议数据单元（横向）</p>
<p>服务数据单元 SDU：层与层之前交换的数据包</p>
<hr>
<h3 id="三种交换方式"><a href="#三种交换方式" class="headerlink" title="三种交换方式"></a>三种交换方式</h3><p>电路交换（Circuit Switching）：建立连接 （分配通信资源）–&gt; 通话（一直占用）–&gt; 释放连接</p>
<p>报文交换（Message Switching）：不对报文进行分割，在路由器中全部储存（不限大小），转发</p>
<p>分组交换（Packet Switching）：</p>
<ul>
<li>发送方构造分组（长度一定，添加首部），发送分组</li>
<li>路由器缓存分组，转发分组（出错只需要重传问题分组）</li>
<li>接收方接受分组，还原报文</li>
</ul>
<h3 id="比特、速率单位及换算"><a href="#比特、速率单位及换算" class="headerlink" title="比特、速率单位及换算"></a>比特、速率单位及换算</h3><p><u>比特</u>（bit）：计算机中数据量的单位，一个比特就是二进制数字中的一个1或0</p>
<p><u>字节</u>（Byte）：1 <em>byte</em> = 8 <em>bit</em></p>
<p>比特单位（数据量）：<em>KB</em> = 2 <sup>10</sup> <em>B</em>，<em>MB</em> = 2 <sup>20</sup> <em>B</em>，<em>GB</em> = 2 <sup>30</sup> <em>B</em>，<em>TB</em> = 2 <sup>40</sup> <em>B</em></p>
<p>速率（数据率）：<em>bits</em>/s (<em>bps<em>，</em>b/s</em> )</p>
<p>​    <em>KB</em> = 10 <sup>3</sup> <em>bps<em>，</em>KB</em> = 10 <sup>6</sup> <em>bps<em>，</em>KB</em> = 10 <sup>9</sup> <em>bps<em>，</em>KB</em> = 10 <sup>12</sup> <em>bps</em></p>
<h3 id="计算机网络体系的分层"><a href="#计算机网络体系的分层" class="headerlink" title="计算机网络体系的分层"></a>计算机网络体系的分层</h3><img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/image-20200713173424378.png" alt="image-20200713173424378" style="zoom:80%;" />

<table>
<thead>
<tr>
<th align="left">层级</th>
<th align="left">任务</th>
<th align="left">主要协议</th>
<th align="left">数据包</th>
</tr>
</thead>
<tbody><tr>
<td align="left">物理层</td>
<td align="left">解决何种信号进行传输比特的问题</td>
<td align="left"><code>HTTP</code>，<code>SMTP</code></td>
<td align="left">报文<code>messege</code></td>
</tr>
<tr>
<td align="left">数据链路层</td>
<td align="left">解决分组在一个网络（一段链路）上传输的问题</td>
<td align="left"><code>TCP</code>,<code>UDP</code></td>
<td align="left">TCP数据包，UDP用户数据报文段</td>
</tr>
<tr>
<td align="left">网络层</td>
<td align="left">分组在多个网络传输（路由）的问题</td>
<td align="left"><code>IP</code></td>
<td align="left">IP数据报或分组</td>
</tr>
<tr>
<td align="left">运输层</td>
<td align="left">解决进程之间基于网络的通信问题</td>
<td align="left">传统以太网 <code>CSMA/CD</code></td>
<td align="left">帧</td>
</tr>
<tr>
<td align="left">应用层</td>
<td align="left">解决通过应用进程的交互来实现特点网络应用的问题</td>
<td align="left">曼彻斯特编码</td>
<td align="left">比特流</td>
</tr>
</tbody></table>
<p>对OSI 七层体系结构还有：</p>
<p><u>应用层</u>：通信双方信息表示问题：数据格式化，文本压缩、解密等</p>
<p><u>会话层</u>：进程之间的会话</p>
<p>😄😂</p>
<h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><h3 id="基本概念们"><a href="#基本概念们" class="headerlink" title="基本概念们"></a>基本概念们</h3><p>物理层考虑怎样才能在连接各种计算机的传输媒体上传输数据比特流，需要考虑的包括</p>
<p>机械特性：关于接口所用接线器</p>
<p>电气特性：电压</p>
<p>功能特性：某一电平的电压表示何种意义</p>
<p>过程特性：对于不同功能的各种可能事件的出现顺序</p>
<h3 id="传输媒体"><a href="#传输媒体" class="headerlink" title="传输媒体"></a>传输媒体</h3><p>导引性传输媒体：同轴电缆（基本不用了）、双绞线、光纤（损耗小容量大）、电力线</p>
<p>非导引型传输媒体：无线电波、微波、红外线（✖）、可见光</p>
<h3 id="传输方式"><a href="#传输方式" class="headerlink" title="传输方式"></a>传输方式</h3><p>串行传输：远距离传输，如计算机网络</p>
<p>并行传输：近距离传输，CPU &lt;===&gt; 接口 </p>
<p>同步传输：收发双方时钟同步的方法；外同步是在收发双方之间添加一条单独的时钟信号线，内同步是将时钟同步信号编码到发送数据中一起运输（如曼彻斯特编码）</p>
<p>异步传输：字节之间异步，每个比特之间仍是同步的</p>
<p>单向通信（单工）：单向</p>
<p>双向交替通信（半双工）：不同时</p>
<p>双向同时通信（全双工)</p>
<hr>
<h3 id="编码与调制"><a href="#编码与调制" class="headerlink" title="编码与调制"></a>编码与调制</h3><p>码元：在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形（构成信号的一个单元，比特 0 和比特 1 用不同波形表示）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">消息（传送数据的实体） --&gt; 数据（电磁形式）--&gt; 信号 --&gt; 基带信号</span><br><span class="line">|--- 数字基带信号</span><br><span class="line">	|--- 编码 ---&gt; 数字信道 ===&gt; 以太网（曼彻斯特编码）</span><br><span class="line">	|--- 调制 ---&gt; 模拟信道 ===&gt; WIFI（CCK/DSSS/OFDM调制）</span><br><span class="line">|--- 模拟基带信号</span><br><span class="line">	|--- 编码 ---&gt; 数字信道 ===&gt; 音频信号进行编码的脉调制 PCM</span><br><span class="line">	|--- 调制 ---&gt; 模拟信道 ===&gt; 语音数据加载到模拟的载波信号中传输</span><br><span class="line">--&gt; 传输媒体（发送信道，接收信道）</span><br></pre></td></tr></table></figure>

<h4 id="常用编码"><a href="#常用编码" class="headerlink" title="常用编码"></a>常用编码</h4><p>不归零编码：需要额外一根传输线来传输时钟，浪费</p>
<p>归零编码：自同步，每个码元传输完毕后归零，浪费数据带宽</p>
<p>曼彻斯特编码：码元中间时刻的跳变，既表示始终又表示数据</p>
<p>差分曼彻斯特编码：跳变仅代表时钟；码元开始处电平是否变化表示数据；更适合较高速的传输速率</p>
<h3 id="混合调制"><a href="#混合调制" class="headerlink" title="混合调制"></a>混合调制</h3><p>频率（调频，FM），相位（PM），振幅（调幅，AM）</p>
<p>相位 + 振幅 ==&gt; 正交振幅调制  QAM</p>
<hr>
<h3 id="信道的极限容量"><a href="#信道的极限容量" class="headerlink" title="信道的极限容量"></a>信道的极限容量</h3><p>奈氏准则：在假定的理想条件下，为了避免码间串扰，码元传输速率是有上限的</p>
<p>香农公式：带宽受限且有高斯白噪声干扰的信道的极限信息传输速率</p>
<h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><p>链路：一个节点到相邻节点的一段物理线路，中间没有任何其他交换节点</p>
<p>数据链路：把实现通信协议的硬件和软件加到链路上，就构成了数据链路</p>
<p>帧：是数据链路层传输和处理数据的单位</p>
<p>使用点对点信道的数据链路层的重要问题：</p>
<ul>
<li>封装成帧</li>
<li>差错检测</li>
<li>可靠传输</li>
</ul>
<p>除此之外，使用广播信道（共享式局域网）</p>
<p>​共享式以太网的媒体接入控制协议 CSMA/CD</p>
<p>​802.11局域网的媒体接入控制</p>
<p>交换式局域网</p>
<p>​网桥和交换机的工作原理</p>
<h3 id="基本问题"><a href="#基本问题" class="headerlink" title="基本问题"></a>基本问题</h3><h4 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h4><p>指数据链路层给上层交付的协议数据单元添加<strong>帧头和帧尾</strong>使之变成帧，</p>
<p>帧头和帧尾中包含有重要的控制信息，如帧定界符——便于从接收的比特流中提取出帧</p>
<p>以太网的Mac帧的帧头和帧尾不包含帧定界符，而是通过在物理层添加前导码来定界</p>
<p><strong>透明传输</strong>：即数据链路层对其上层交付的内容没有限制</p>
<p>对 flag 和 ESC 要进行转义（面向字节）；零比特填充法（面向比特）</p>
<p><strong>最大传送单元</strong><code>MTU</code>（Maximum Transfer Unit）：为了提高传输效率，应使帧尽量长，但是老绿道差错控制等因素，每一种数据链路层协议都规定了帧数据部分的最大长度。</p>
<h4 id="差错检测"><a href="#差错检测" class="headerlink" title="差错检测"></a>差错检测</h4><p>比特差错：比特 0 / 1差错</p>
<p>误码率：Bit Error Rate</p>
<p>差错检测码：检测数据在传输过程中是否产生了比特差错</p>
<p><strong>检错方法</strong></p>
<ul>
<li><p>奇偶校验：在待发送的数据后面添加1位奇偶校验码，使得整个数据中“1”的个数为奇数（奇校验）或偶数，检测得到的数据中“1”的奇偶性有无发生变化</p>
</li>
<li><p>循环冗余校验CRC（Cyclic Redundancy Check）</p>
</li>
</ul>
<p>约定生成多项式<code>G(x)</code> ==&gt; 待发送数据和生成多项式计算差错检测码（冗余码）==&gt; 接收方检测</p>
<p>检错能力好，容易通过硬件实现，广泛应用于数据链路层</p>
<p>注意：只能检测出差错，无法定位差错，因此无法纠正错误；通常用<strong>检测重传</strong>方式来纠正传输中的错误</p>
<h4 id="可靠传输"><a href="#可靠传输" class="headerlink" title="可靠传输"></a>可靠传输</h4><p>用差错检技术检测是否存在误码如何处理？</p>
<p>不可靠传输：仅仅丢弃有误码的帧</p>
<p>可靠传输：想办法实现发送端传输什么，接收端就收到什么</p>
<p>一般使用：有线链路误码率较低，不要求数据链路层的可靠传输；无线则相反</p>
<p>传输差错类型：比特差错（数据链路层）、分组丢失、分组失序、分组重复</p>
<hr>
<p><strong>可靠传输的实现机制</strong>（适用于各层）</p>
<p><strong>停止-等待协议</strong>SW（Stop-and-Wait）</p>
<p>W<sub>T</sub> = W<sub>R</sub> =1</p>
<p>机制：</p>
<ul>
<li><p>一步一步走，一个data，回复一个 ACK 或 NAK</p>
</li>
<li><p>需要给分组编号(0/1) –&gt; 是否重复</p>
</li>
<li><p>超时重传 –&gt; 不要一直在等</p>
</li>
</ul>
<p>缺点：信道利用率低，要是超时重传了更低</p>
<p><strong>回退 N 帧协议</strong> GBN</p>
<p>1 &lt; W<sub>T</sub> &lt;= 2<sup>n</sup> - 1</p>
<p>机制：</p>
<ul>
<li><p>可以流水线式传输，可以 <code>ACKn</code> 累积确认</p>
</li>
<li><p>收到重复确认就知道已发送的数据分组有误，重传</p>
</li>
<li><p>但是一旦中间出现差错，需要丢弃已经接收到的未按序到达的部分，通信质量不好时信道利用率并不优于 SW 协议</p>
</li>
<li><p>若W<sub>T</sub> &gt; 2<sup>n</sup> - 1 接收方无法分辨新旧数据分组</p>
</li>
</ul>
<p><strong>选择重传协议 SR</strong>（Selective Request）</p>
<p>接收窗口大于 1，先接受失序到达但无误码并且序号落在接收窗口的数据分组，收齐了再一起交到上层，接收窗口滑动，为了让发送方仅重传差错的数据分组，不能再累积确认，应该逐一确认</p>
<hr>
<h3 id="点对点协议PPP（point-to-point-protocol）"><a href="#点对点协议PPP（point-to-point-protocol）" class="headerlink" title="点对点协议PPP（point-to-point protocol）"></a>点对点协议PPP（point-to-point protocol）</h3><p>PPP 协议<u>为在点对点链路传输的各种协议</u>数据报提供了<u>一个标准方法</u>，由以下三部分</p>
<ul>
<li><p>对各协议数据报的<strong>封装方法</strong></p>
<p><strong>帧格式</strong>：</p>
<img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/FCA17D68EE20F333887C7B07D2B2EE86.png" alt="FCA17D68EE20F333887C7B07D2B2EE86" style="zoom:67%;" />

<p>F：Flag 字段，定界符，16进制，取值为 0×7E</p>
<p>A：Addess 字段，0×FF，预留</p>
<p>C：Control，0×03，预留</p>
<p>P：Protocol：指明帧交付哪个协议处理，如0×0021 ==&gt; 帧的数据部分是 IP 数据报</p>
<p>​    0×C021 ==&gt; LCP 分组；0×8021 ==&gt; NCP 分组</p>
<p>FCS（Frame Check Sequence）：帧检测序列，用 CRC 计算出的校验位</p>
<p><strong>透明传输</strong>：</p>
<p>面向字节：7E ==&gt; (7D,5E)；转移符7D ===&gt; (7D,5D)</p>
<p>面向比特：五个连续1插入一个比特0</p>
<p><strong>差错检测</strong>：向上提供不可靠传输服务</p>
</li>
<li><p>链路控制协议 LCP：用于建立、配置以及测试数据链路的连接（向下面向字节的异步链路/ 同步链路）</p>
</li>
<li><p>一套网络控制协议NCPs：（向上面向网络层，如TCP/IP中的 IP）</p>
</li>
</ul>
<p>工作模式：</p>
<p><img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/E2E3E4ECF15689664929B81007AEF7C5.png" alt="img"></p>
<hr>
<h3 id="使用广播信道（共享式局域网）"><a href="#使用广播信道（共享式局域网）" class="headerlink" title="使用广播信道（共享式局域网）"></a>使用广播信道（共享式局域网）</h3><p>共享信道除了需要考虑以上三个基本问题之外，还需要考虑如何协调<u>多个发送和接收站点</u>对<u>一个共享媒体传输</u>的占用——一个信道多个活动的分配，所以需要进行<strong>媒体接入控制</strong></p>
<h4 id="媒体接入控制MAC-Medium-Access-Control"><a href="#媒体接入控制MAC-Medium-Access-Control" class="headerlink" title="媒体接入控制MAC(Medium Access Control)"></a>媒体接入控制MAC(Medium Access Control)</h4><p>随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对链路和链路层交换机技的交换式局域网在有线领域已经完全取代了共享式局域网，但由于无线信道的广播天性，无限局域网仍然使用共享式局域网</p>
<p><strong>静态划分信道</strong>：预先固定分配好信道，不够灵活，对突发性数据传输利用率低，通常用与物理层</p>
<p>复用：通过一条物理线路同时传输多路用户的信号</p>
<p>频分复用FDM：同时占用不同的频带资源并行通信</p>
<p>时分复用TDM</p>
<p>波分复用WDM</p>
<p><u>码分多址 CDMA</u>（Code Division Multiple Access）</p>
<p>各用户挑选不同的码型，可以用在同样的时间使用同样的频带进行通信，不会造成干扰</p>
<p>在<code>CDMA</code>中，每一个比特时间再划分为<code>m</code>个短的间隔，称为<u>码片</u> ，使用 CDMA 的每一个站被指派一个唯一的m bit码片序列……</p>
<hr>
<p><strong>动态接入控制</strong>：主要接入方为随机接入：所有站点通过竞争，随机在信道上发送数据，如果产生了冲突，则双方均发送失败；通过协议来解决冲突之后应该如何尽快回复（共享式以太网就是采用随机接入）</p>
<p><u>载波监听多址接入/碰撞检测</u>（<strong>总线局域网</strong>使用） <code>CSMA/CD</code>（Carrier Sense Multiple Access/ Collision Detection）</p>
<ul>
<li><p>多址接入 <code>MA</code></p>
<p>分布：多个站连接在一条总线上，竞争使用总线</p>
</li>
<li><p>载波监听 <code>CS</code></p>
<p>发送：先听后发，要发送帧时要先检测一下总线上是否有其他站点在发送帧——检测到总线<u>空闲96比特</u>则发送这个帧</p>
</li>
<li><p>碰撞检测 <code>CD</code></p>
<p>冲突：一边发送一遍检测碰撞，一旦碰撞立即停止发送；退避后重发</p>
<p>强化碰撞：还继续发送 32/48bit 的人为干扰信号，以便有更多碰撞信号使所有站点检测出来</p>
</li>
</ul>
<h5 id="CSMA-CD协议"><a href="#CSMA-CD协议" class="headerlink" title="CSMA/CD协议"></a><code>CSMA/CD</code>协议</h5><ul>
<li><p>争用期（碰撞窗口）</p>
<p>主机最多经过2τ（RTT）时长就可以检测除本次是否发生了碰撞</p>
<p>以太网帧发送的主机多，往返时延大，碰撞易发生，所以不要太长</p>
</li>
<li><p>最小帧长</p>
<p>可以保证在发送完毕之前就检测到该帧的发送过程中是否遭遇碰撞</p>
<p>以太网规定最小帧长为64字节</p>
</li>
<li><p>最大帧长</p>
</li>
<li><p>截断二进制指数<strong>退避算法</strong></p>
<p>退避时间 = 基本退避时间（争用期时间） * 随机数</p>
<p>重传 16次还不成功就丢弃</p>
</li>
</ul>
<hr>
<h5 id="CSMA-CA协议"><a href="#CSMA-CA协议" class="headerlink" title="CSMA/CA协议"></a><code>CSMA/CA</code>协议</h5><p><u>载波监听多址接入/碰撞避免</u>（<strong>无线局域网</strong>） <code>CSMA/CA</code>（Carrier Sense Multiple Access/ Collision Avoidance）</p>
<p>是 <code>IEEE802.11</code>无线局域网采用的无线信道访问控制协议，因为无线局域网难以实现碰撞检测（传播强度减弱、隐蔽站问题）</p>
<ul>
<li><p>帧间间隔 <code>IFS</code>：802.11标准规定所有的站点必须持续检测到信道空闲一段时间后才能发送帧</p>
<ul>
<li>短帧帧间间隔<code>SIFS</code>：用于分隔属于一次对话的各帧</li>
<li><code>DCF</code>帧间间隔<code>DIFS</code>：在 DCF 方式中发送数据和管理帧，信道由忙转空闲后经过 DIFS 时间后还要退避一段时间后才能使用信道（为了尽可能地避免碰撞）</li>
<li>在实行 CSMA/CD 的时候还是用 停止等待协议（一个个收发）</li>
</ul>
</li>
<li><p>802.11 标准的信道预约和虚拟载波监听</p>
<ul>
<li><code>RTS</code>（Request To Send）发送请求：一个短帧，包括源地址、目的地址和这次通信所需要的时间（MAC 帧首部有一个持续期字段）</li>
<li>允许发送<code>CTS</code> (Clear To Send)：包括源地址、持续时间；</li>
<li>虚拟载波监听：站点只要监听到 RTS 帧、CTS 帧、数据帧的任何一个，就知道信道被占用的持续时间，不需要真正监听到信道上的信号，因此可以键少隐蔽站带来的碰撞问题</li>
</ul>
</li>
</ul>
<h3 id="MAC-地址、IP-地址、APR-协议"><a href="#MAC-地址、IP-地址、APR-协议" class="headerlink" title="MAC 地址、IP 地址、APR 协议"></a>MAC 地址、IP 地址、APR 协议</h3><p>（交换式局域网）</p>
<p><strong>MAC 地址</strong>：是以太网的 MAC 子层所示用的地址（数据链路层）</p>
<ul>
<li>是什么<pre><code>- 同一广播信道上的两个主机通信需要；网络上各接口的唯一的标识
   - 主机发送的**帧**中的地址，由于媒体接入控制——Media Access Control
- 一般被固定在网卡的电可擦可编程只读存储器 EEPROM 中（硬件地址/物理地址）
- 决定单播还是多播？
- 数据链路层首部标记 MAC 地址</code></pre></li>
</ul>
<ul>
<li><p>组成和分类</p>
<ul>
<li><p>&amp;nbsp|第一字节第0位|第一位</p>
<p>0|单播|全球管理</p>
<p>1|多播|本地管理</p>
</li>
<li><p>广播 MAC 地址：FF-FF-FF-FF-FF-FF</p>
</li>
<li><p>多播地址：第一个字节的最小比特为为1</p>
</li>
<li><p>随机 MAC 地址：隐私</p>
</li>
</ul>
</li>
</ul>
<p><strong>IP 地址</strong>：是 TCP/IP 体系结构的网际层所使用的地址</p>
<ul>
<li><p>是什么</p>
<ul>
<li>是<strong>因特网上</strong>主机和路由器所使用的地址，用于网络编号（因特网上各网络）和主机编号（不同的主机或路由器各接口）</li>
<li>网络层首部需要标记 IP 地址</li>
</ul>
</li>
<li><p><strong>数据包转发</strong>：转发时源IP 地址和目的 IP 地址是不变的；而源 MAC 地址和目的 MAC 地址是随逐个网络（不用的路由器）改变。所以要正常转发必须有把那知道 IP 地址和 MAC 地址的对应关系</p>
</li>
</ul>
<p><strong>ARP 协议</strong>：属于 TCP/IP 体系结构的网际层。</p>
<ul>
<li><p>是什么 </p>
<ul>
<li>地址解析协议 APR</li>
<li>已知设备分配到的 IP 地址，使用 ARP 协议可以获得设备的 MAC 地址。</li>
<li>ARP 高速缓存</li>
<li><strong>不能跨网络使用 ARP</strong></li>
</ul>
</li>
<li><p>ARP 请求报文（广播发送）</p>
<ul>
<li>我想知道 IP 地址为 *** 的主机的 MAC 地址</li>
<li>目的主机接收请求报文，记录来源的 IP 地址和 MAC 地址，向来源主机发送  ARP自己的 MAC 地址</li>
<li>把得到的 MAC 地址记录到自己的 ARP 告诉缓存中</li>
</ul>
</li>
<li><p>ARP 高速缓存条目分类</p>
<ul>
<li>动态：自动获取，生命周期默认两分钟</li>
<li>静态：手工设置</li>
</ul>
</li>
</ul>
<h3 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h3><p><strong>集线器</strong></p>
<ul>
<li><p>星型以太网，仍然是一个总线网，使用 CSMA/CD 协议</p>
</li>
<li><p>工作在物理层</p>
</li>
<li><p>互联成更大的总线型以太网；更大的碰撞域（冲突域）</p>
</li>
</ul>
<p><strong>交换机</strong></p>
<ul>
<li>多个接口，每个接口都能与一台主机或者以太网交换机相连，全双工方式</li>
<li>并行，同时通信，无碰撞</li>
<li>工作在数据链路层（也包括物理层）：收到帧后再<strong>帧交换表</strong>中查找 MAC 地址对应的接口号，然后转发</li>
<li>即插即用，帧交换表会通过自学习算法自动建立起来的</li>
<li>扩大广播域，不会扩大碰撞域（VLAN 除外）</li>
</ul>
<p><strong>交换机自学习和转发帧</strong></p>
<p>（假设个网络中其他个主机的 MAC 地址，无需进行 ARP）</p>
<ul>
<li>不知道的时候：洪泛发送，登记；其他交换机也记录发送主机的来源接口</li>
<li>知道的时候：明确转发，其他人收不到</li>
<li>有效时间，到期删除：接口对应的主机换了；主机的网卡换了</li>
</ul>
<hr>
<p><strong>以太网交换机的生成树协议 STP</strong></p>
<p>提高以太网的可靠性——添加<strong>冗余链路</strong></p>
<p>以太网生成树协议：可以自动计算并构建一个逻辑上没有环路的网络，其逻辑拓扑结构必须是树形的、连通整个网络的</p>
<hr>
<h3 id="虚拟局域网-VALN-概述"><a href="#虚拟局域网-VALN-概述" class="headerlink" title="虚拟局域网 VALN 概述"></a>虚拟局域网 VALN 概述</h3><p>以太网交换机工作在数据链路层（包括物理层），而使用以太网交换机互联的交换式以太网所有站点都属于一个广播域，但是这样会带来”广播风暴”、为以维护、安全隐患等问题；而 TCP/ IP 协议栈很多协议都会使用广播（ARP、路由信息协议 RIP 、动态主机配置协议 DHCP）</p>
<p><strong>分隔广播域</strong></p>
<p>路由器分隔 &amp; VLAN</p>
<p><strong>VLAN</strong>（Virtual Local Area Network）:</p>
<ul>
<li>是什么：将局域网内设备按<u>共同需求</u>划分成逻辑组的一种技术</li>
<li>实现机制：</li>
</ul>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>网络层的主要任务是实现网络互连，进而实现数据包在<strong>各网络之间</strong>的传输</p>
<p>要实现网络层的任务，需要解决的问题：</p>
<ul>
<li>网络向运输层提供什么样的服务（可靠传输还是不可靠）</li>
<li>网络寻址问题</li>
<li>路由选择问题</li>
</ul>
<p><strong>因特网、网际层和 TCP/IP 协议栈</strong></p>
<p><u>因特网</u>是全球用户最多的互联网，它使用 <u>TCP/IP 协议栈</u></p>
<p>TCP/IP 协议栈的网络层使用<u>网际协议 IP</u>，因此在 TCP/IP 协议栈中网络层称为<u>网际层</u></p>
<hr>
<h3 id="网络层提供的两种服务"><a href="#网络层提供的两种服务" class="headerlink" title="网络层提供的两种服务"></a>网络层提供的两种服务</h3><p><strong>面向连接的虚电路服务</strong></p>
<ul>
<li>可靠通信由网络来保证</li>
<li>必须建立网络层的连接——虚电路 VC（Virtual Circuit），通信双方沿着已经建立的蓄电库大宋分组；结束之后释放虚电路</li>
<li>只需要在建立连接的时候使用目的主机的地址，之后只需要分隔分组的首部携带一条虚电路的编号</li>
<li>这种通信方式如果再使用可靠传输的网络协议，就可以使发送的分组最终正确到达接受方（按序、不丢失、不重复）</li>
<li>很多广域分组交换网都是用面向连接的虚电路服务</li>
</ul>
<p><strong>无连接的数据报服务</strong></p>
<ul>
<li>可靠通信由用户主机保证</li>
<li>不需要建立网络层的连接</li>
<li>每个分组可以走不同的路径</li>
<li>每个分组的首部必须携带目的的主机的完整地址</li>
<li>可能误码、丢失、重复和失序</li>
<li>由于网络本身不提供端到端的可靠传输服务，使路由器可以做得比较简单</li>
<li>因特网使用了这种设计思想，将复杂的网络处理功能之余因特网的边缘（用户主机及其内部的运输层），而将相对简单的尽最大努力的分组交付功能置于因特网核心</li>
</ul>
<p><img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/%60$9FO4GU0%5D41_69H0ONLIP2.png" alt="img"></p>
<p>TCP/IP 体系结构的因特网的网际层提供的是简单灵活、无连接的、尽最大努力交的数据报服务，本章一下内容主要围绕网际层如何传送 IP 数据报这个主题进行讨论</p>
<h3 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h3><h4 id="IPv4-地址概述"><a href="#IPv4-地址概述" class="headerlink" title="IPv4 地址概述"></a>IPv4 地址概述</h4><p>IPv4 地址是因特网上每一台主机（或路由器）的每一个接口分配在全世界范围内唯一的32比特标识符。32 比特不方便阅读，因此采用<strong>点分十进制表示方法</strong>以便用户使用。</p>
<h4 id="分类编制的IPv4"><a href="#分类编制的IPv4" class="headerlink" title="分类编制的IPv4"></a>分类编制的IPv4</h4><table>
<thead>
<tr>
<th align="center">分类</th>
<th align="center">网络号位数</th>
<th align="center">开头位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A类</td>
<td align="center">8位</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">B 类</td>
<td align="center">16位</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">C类</td>
<td align="center">24位</td>
<td align="center">110</td>
</tr>
</tbody></table>
<p>只有 A 、B、C类地址可以分配。主机号全 0 的是网络地址，主机号全 1 的是广播地址，不分配。</p>
<p>这几类的最小网络号 0 保留不指派，最大网络号做为本地换回测试地址不指派</p>
<h4 id="划分子网"><a href="#划分子网" class="headerlink" title="划分子网"></a>划分子网</h4><p>是什么：借用主机号的一部分来作子网号，就可以把网络号进一步划分成更多的部分，这种方法称为<strong>划分子网</strong>的方法，可以来充分利用原有网络号中的 IP 地址。如果我们反过来想知道分类地址中主机号有多少比特被当做子网号了，可以通过<strong>子网掩码得知</strong>。</p>
<p>子网掩码表示规则：连续比特 1 来表示对应网络号和子网号，0 表示主机号</p>
<h4 id="无分类编址的-IPv4-地址"><a href="#无分类编址的-IPv4-地址" class="headerlink" title="无分类编址的 IPv4 地址"></a>无分类编址的 IPv4 地址</h4><p>CIDR 使用“斜线记法”（CIDR法）：在 IPv4 地址后面加上<code>/</code>并写上网络前缀所占的比特数量</p>
<p>那么网络前缀相同的连续 IP 地址可以组成一个“ CIDR 地址块”</p>
<p>通过路由聚合的方法，网络前缀越长，地址块越小越优先</p>
<h4 id="IPv4-地址的应用规划"><a href="#IPv4-地址的应用规划" class="headerlink" title="IPv4 地址的应用规划"></a>IPv4 地址的应用规划</h4><p>定长子网掩码 FLSM</p>
<p>变长子网掩码 VLSM</p>
<h3 id="IP-数据报的发送和转发过程"><a href="#IP-数据报的发送和转发过程" class="headerlink" title="IP 数据报的发送和转发过程"></a>IP 数据报的发送和转发过程</h3><p>主机发送：判断是否同一网络，是就直接交付，不是就交给默认网关</p>
<p>路由转发：检查首部是否出错；根据 IP 数据目的地址在路由表中查找匹配的条目</p>
<h3 id="静态路由配置及其可能产生的路由环路问题"><a href="#静态路由配置及其可能产生的路由环路问题" class="headerlink" title="静态路由配置及其可能产生的路由环路问题"></a>静态路由配置及其可能产生的路由环路问题</h3><p>配置错误导致套娃</p>
<h3 id="路由选择协议"><a href="#路由选择协议" class="headerlink" title="路由选择协议"></a>路由选择协议</h3><p>动态路由选择是路由器通过路由选择协议自动获取路由信息</p>
<p>特点：自适应；分布式（路由器之间交换路由信息）；分层次（将以特网划分成许多较小的自制系统AS）</p>
<img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/00C9A8E8FB3D41751D60281A2B86A1ED.png" alt="img" style="zoom:50%;" />

<h4 id="域内：内部网关协议-IGP"><a href="#域内：内部网关协议-IGP" class="headerlink" title="域内：内部网关协议 IGP"></a>域内：内部网关协议 IGP</h4><ul>
<li><p><strong>RIP</strong> (Rountine Information Protocol) 是 IGP 中最先广泛应用的协议之一</p>
<ul>
<li>选择依据：AS 内每一个路由器都要维护从他自己到 AS 内其他每日一个网络的距离记录，RIP 用跳数作为量度来衡量到达目的网络的距离</li>
<li>限制：允许一条路径最多包含15 个路由器，距离等于16相当于不可达</li>
<li>选择：优先短路径，多条“距离”相等的路由时，进行<u>等价负载均衡</u></li>
<li>要点：仅和相邻的路由器交换路由表；周期性交换</li>
<li>工作过程<ul>
<li>开始时只知道自己和直连网络的距离位移</li>
<li>和相邻的路由器周期性交换并更新（没有的加上，有更短的更新，相同的等价负载均衡）路由信息</li>
<li>最后每个路由器都知道本 AS 内个网络的嘴短距离和下一跳地址（<strong>收敛</strong>）</li>
</ul>
</li>
<li>坏消息传的慢（路由环路）：当某路由直连的网络发生故障时，其路由表中到故障网络的跳数就会变成16，此时其路由表传输会慢于其他路由表，因此在周期交换中“被谣言误导”，经过多次交换后才渐渐收敛。</li>
</ul>
</li>
<li><p><strong>OSPF</strong>(Open Shorter Path First) 开放最短路径优先</p>
<ul>
<li>选择依据：基于链路状态（本路由器和那些路由器相连，及相应链路的代价——费用、距离、时延、带宽等），通过最短路径算法<strong>SPF</strong>计算，从算法上保证了不会产生路由环路</li>
<li>交互“问候（Hello）分组”，建立和维护邻里关系：发送周期为10s， 40s还不收到就认为该邻居路由不可达</li>
<li>每个路由都会产生链路状态通告<strong>LSA</strong> ，封装在链路状态更新分组<strong>LSU</strong> 中，洪泛发送——包含直连网络和邻居路由器的链路状态信息；而 <code>LUA</code>存储在<strong>链路状态数据库 LSDB</strong></li>
<li>在多点接入网络中：选举指定路由器和备用指定路由器，大家都和他们建立连接</li>
</ul>
</li>
</ul>
<h4 id="域间：外部网关协议-EGP（边界网关协议-BGP）"><a href="#域间：外部网关协议-EGP（边界网关协议-BGP）" class="headerlink" title="域间：外部网关协议 EGP（边界网关协议 BGP）"></a>域间：外部网关协议 EGP（边界网关协议 BGP）</h4><ul>
<li>BGP 致力于寻找一条能够到达且比较好的路由，而非寻找最佳路由</li>
</ul>
<h3 id="IPv4数据报的首部格式"><a href="#IPv4数据报的首部格式" class="headerlink" title="IPv4数据报的首部格式"></a>IPv4数据报的首部格式</h3><h3 id="网际控制报文协议-ICMP"><a href="#网际控制报文协议-ICMP" class="headerlink" title="网际控制报文协议 ICMP"></a>网际控制报文协议 ICMP</h3><p>ICMP（Internet Control Message Protocol）</p>
<p>干什么的：在网际层使用，被封装在 IP 数据报中发送，主机或路由器使用 ICMP 来发送<strong>差错报告报文</strong>和<strong>询问报文</strong>，以提高 IP 数据报成功交付的机会</p>
<p><strong>差错报文</strong></p>
<ul>
<li><p>类型</p>
<ul>
<li>终点不可达：路由器或主机不能交付数据报</li>
<li>源点抑制：因拥塞而丢弃，让主机放慢发送速率</li>
<li>时间超过：生存字段为 0 时</li>
<li>参数问题：出现误码</li>
<li>改变路由（重定向）：有更好的路由</li>
</ul>
</li>
<li><p>以下类型不发送差错报文了</p>
<ul>
<li>对 ICMP 自己的差错</li>
<li>对第一个分片的数据报文的所欲后续数据报片都不发送</li>
<li>对多播地址的数据报</li>
<li>特殊地址的数据报</li>
</ul>
</li>
</ul>
<p><strong>询问报文</strong></p>
<ul>
<li>类型<ul>
<li>回复请求和回答：测试是否可达及其状态</li>
<li>时间戳请求和回答：测试同步和测量时间</li>
</ul>
</li>
</ul>
<p><strong>ICMP 报文应用</strong></p>
<ul>
<li>分组网间探测 PING ：用来测试主机或路由器的联通性；是使用网际层的 ICMP 来会送请求和回答报文</li>
<li>跟踪路由 traceroute：测试 IP 数据报到源主机到达目的主机需要经过哪些路由器；在 windows 系统中，使用 tracer 命令，使用 ICMP 会送请求、回答和差错报告报文</li>
</ul>
<hr>
<h3 id="虚拟专用网-VPN-和网络地址转换-NAT"><a href="#虚拟专用网-VPN-和网络地址转换-NAT" class="headerlink" title="虚拟专用网 VPN 和网络地址转换 NAT"></a>虚拟专用网 VPN 和网络地址转换 NAT</h3><p><strong>VPN</strong> (Virtual Private Network)：是利用共用网（ Internet）作为本机构个专用王志坚的通信载体，又称虚拟专用网</p>
<p>IP 地址分配问题：虚拟专用网中各主机所分配的地址应该是本机构可自由分配的专用地址，然后在路由器处进行加密，传输，在对方路由器解密</p>
<p><strong>NAT</strong> (Network Address Translation) 网络地址转换：使大量使用内部专用地址的用户共享少量外部全球地址来访问因特网上的主机和资源。</p>
<p><strong>NAPT</strong>：因为大部分网络应用在运输层协议 TCP 或 UDP 来传送数据，因此可以用了利用运输层端口号和 IP 地址一起转换，那就可以用一个全球 IP 地址使<strong>多个</strong>拥有本地地址的主机和因特网的主机进行通信</p>
<hr>
<h2 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h2><p>物理层、数据链路层和网络层共同解决了主机到主机的通信；而运输层的任务是<u>为不同主机上的应用进程提供直接的通信服务</u>，又称为端到端服务</p>
<h3 id="运输层端口号、复用与分用概念"><a href="#运输层端口号、复用与分用概念" class="headerlink" title="运输层端口号、复用与分用概念"></a>运输层端口号、复用与分用概念</h3><p><strong>运输端口号</strong></p>
<ul>
<li><p>是什么：运行在计算机上的进程使用进程标识符 PID 来标志，不同操作系统采用不同格式的进程标识符，为了能使运行在不同操作系统上的应用进程之间能够进行网络通信，使用同一方法对 TCP/IP 体系的运输层进行标记——<strong>端口号</strong></p>
</li>
<li><p>格式：16 比特表示，0~65535</p>
</li>
<li><p>分类：</p>
<ul>
<li>熟知端口号：0~1023，分配给 TCP/IP 结构体系中的一些重要应用协议（如， FTP—20/21；HTTP—80；DNS—53 ）</li>
<li>登记端口号：1024~49151，给没有熟知端口号的应用进程使用，需要登记，防止重复</li>
<li>短暂端口号：49152~65535，留给用户号应用进程选择暂时使用。当服务器收到用户的进程的报文时，就知道了用户使用的动态端口号，通信结束后，其他用户进程也能使用</li>
</ul>
</li>
</ul>
<p><strong>发送方的复用和接收方的分用</strong></p>
<p><img src="C:%5CUsers%5Chz%5CAppData%5CRoaming%5CTencent%5CUsers%5C1440961573%5CQQ%5CWinTemp%5CRichOle%5CIHGNX3%5D$%7BD5" alt="img">)AP4AYXPJYE7.png)</p>
<p>就像几个不同的应用进程通过不同的端口去使用UDP，UDP 和 TCP 通过不同的协议字段来使用 IP </p>
<p><strong>TCP/IP 体系常用协议和所使用的运输层熟知端口号</strong></p>
<p>[img]</p>
<h3 id="UDP-和-TCP-的对比"><a href="#UDP-和-TCP-的对比" class="headerlink" title="UDP 和 TCP 的对比"></a>UDP 和 TCP 的对比</h3><p>UDP</p>
<ul>
<li>无连接的UDP</li>
<li>支持单播、多播和广播</li>
<li>面向应用报文</li>
<li>尽最大努力交付，向上层提供无连接不可靠传输服务；不使用流量控制和拥塞控制（适用于 IP 电话、视频会议等实时应用）；</li>
<li>UDP 用户数据报首部仅 8 字节</li>
</ul>
<p>TCP</p>
<ul>
<li><p>面向连接的 TCP——“三报文握手”建立连接 &amp; “四报文挥手”释放连接</p>
</li>
<li><p>三报文握手建立连接，在基于 TCP 连接的可靠信道通信，因此仅支持单播</p>
</li>
<li><p>面向字节流</p>
</li>
<li><p>向上层提供面向连接可靠传输服务，不会出现误码、丢失、乱序、重复，使用流量控制和拥塞控制；适用要求可靠传输的应用，如文件传输</p>
</li>
<li><p>TCP 报文段首部最小 20 字节，最大 60 字节</p>
</li>
</ul>
<h3 id="TCP-的流量控制"><a href="#TCP-的流量控制" class="headerlink" title="TCP 的流量控制"></a>TCP 的流量控制</h3><p>是什么：流量控制（flow control），控制发送方的发送速率，让接收方来得及接受；利用<u>滑动窗口</u>机制课很方便地在 TCP 连接上实现对发送方的流量控制</p>
<p>怎么做：</p>
<ul>
<li>TCP 接收方利用自己的接受窗口大小来限制发送窗口的大小</li>
<li>TCP发送发送方收到零窗口通知后，应启动<strong>持续计时器</strong>，持续计时器超时后，向接收方发送零窗口探测报文</li>
</ul>
<h3 id="TCP-的拥塞控制"><a href="#TCP-的拥塞控制" class="headerlink" title="TCP 的拥塞控制"></a>TCP 的拥塞控制</h3><p>拥塞：(congestion) 若对网络中某一资源的需求超过了该资源（单款、交换节点中的缓存和处理机）所能提供的部分，网络性能就会变坏。若出现拥塞而不控制整个网络的吞吐量就会随输入负荷的增大而下降，最后达到<strong>死锁</strong>状态（吞吐量为0）</p>
<p><strong>拥塞算法及其基本原理</strong></p>
<p>发送方维护一个叫<strong>拥塞窗口cwnd</strong>的状态变量，其值取决于网络的拥塞程度，且动态变化</p>
<ul>
<li>维护原则：不出现阻塞， <code>cwnd</code>就大一些，阻塞就小一些</li>
<li>如何判断出现阻塞：发生超时重传</li>
</ul>
<p>发送方将拥塞窗口作为送窗口 <code>swnd</code> = <code>cwnd</code>，并维护一个<u>慢开始门限 <code>ssthresh</code></u>状态变量</p>
<ul>
<li><code>cwnd</code>&lt;<code>ssthresh</code>：开始慢开始算法</li>
<li><code>cwnd</code>&gt;<code>ssthresh</code>：停止慢开始算法，改而使用拥塞避免算法</li>
<li><code>cwnd</code>=<code>ssthresh</code></li>
</ul>
<p><strong>慢开始</strong>：拥塞窗口一直 double 至慢开始门限处</p>
<p><strong>拥塞避免</strong>：一个一个地增加；直至重传计时器超时，判断网络出现拥塞，于是：</p>
<pre><code>- 将`ssthresh`值更新为发生拥塞是的`cwnd`的一半
- 将 `cend`值减少为 1 ，重新执行慢开始算法</code></pre><p><strong>快重传</strong>：有时候只是丢失，而没用出现拥塞，所以没必要把拥塞创空设置为1降低传输效率。而快重传机制就是使发送方尽快进行重传，而不是等超时计时器超市再重传</p>
<ul>
<li>实现：<ul>
<li>接收方无需等到自己发送数据时捎带确认，而是立即发送确认</li>
<li>既是收到失序的报文段也要立即发出对已经收到的报文段的重复确认</li>
<li>一旦收到三个连续的重复确认，就将相应的报文段立即重传，不用等超时</li>
</ul>
</li>
</ul>
<p><strong>快恢复</strong>：收到三个重复确认，就知道无需启动慢开始算法，而执行块恢复算法</p>
<ul>
<li>发送方将<code>ssthresh</code>和<code>cwnd</code>调整为原来的 一半，开始实行拥塞避免算法</li>
<li>有的是将快恢复开始时的拥塞窗口再 +3</li>
</ul>
<h3 id="TCP-超时重传时间的选择"><a href="#TCP-超时重传时间的选择" class="headerlink" title="TCP 超时重传时间的选择"></a>TCP 超时重传时间的选择</h3><p>往返时间<code>RTT</code></p>
<p>超时重传时间<code>RTO</code></p>
<p>RTT 偏差的加权平均 RTT<sub>D</sub></p>
<ul>
<li>RFC 6298：每次测量得到的 RTT 不具有普遍适用性，因而使用每次测量得到的 RTT 样本，计算加权平均往返时间，再加上四倍的 RTT<sub>D</sub></li>
<li>Karn 算法及其修正：如果发生了重传，就难以准确确定 RTT 值了，Karn 算法中不采用重传样本的值。但是这样又可能是报文的时延增大了而且以后一直维持这个时延，那超时重传就无法更新。于是修正后：报文段重传一次，就把超时重传施加增大一些（如两倍）。</li>
</ul>
<h3 id="TCP-的运输连接管理"><a href="#TCP-的运输连接管理" class="headerlink" title="TCP 的运输连接管理"></a>TCP 的运输连接管理</h3><h4 id="TCP-连接的建立"><a href="#TCP-连接的建立" class="headerlink" title="TCP 连接的建立"></a>TCP 连接的建立</h4><p>TCP 连接需要解决的问题</p>
<ul>
<li>双方都确知对方的存在</li>
<li>双方能够协商一些参数（最大窗口值、是否使用窗口扩大选项、时间戳选项以及服务质量）</li>
<li>双方能对运输实例资源（缓存大小等）进行分配</li>
</ul>
<h5 id="三报文握手"><a href="#三报文握手" class="headerlink" title="三报文握手"></a>三报文握手</h5><img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/Q~F8M91}9R_W9KF{S@}Q63P.png" alt="img" style="zoom:80%;" />

<p><u>来解释一下这些字符都是什么意思</u></p>
<p>同步标志位 <code>SYN</code>： 是 TCP 首部的一个字段，是在 TCP 连接建立时用来同步的序号。SYN 数据包指的是 SYN 值为 1 的 TCP 包，只有收到 SYN 包才能<strong>建立连接</strong>。</p>
<p><code>ACK</code> ：确认字符，在数据通信中，表示发来的数据已确认接收无误。</p>
<p>终止标志位 <code>FIN</code>：用来释放 TCP 连接</p>
<p><code>seq</code>：序列号，随机初始化而得，意思是，你方请求我已经收到，我方数据流就从这个数开始，只是做一个标记用吧</p>
<p><code>ack</code>：对收到的数据包的确认，值是期待收到的数据包的序列号</p>
<p>TCP 规定，SYN = 1 单位报文段不能携带数据，但消耗一个序号；而普通的确认报文段如果不携带数据，则不消耗序号。</p>
<p><u>第三次握手多余吗？</u></p>
<p>可以防止已失效的连接请求报文突然有传送到了 TCP 服务器，因而导致错误</p>
<h5 id="四报文挥手"><a href="#四报文挥手" class="headerlink" title="四报文挥手"></a>四报文挥手</h5><img src="http://pictures-by-skylar.oss-cn-shenzhen.aliyuncs.com/img/CBDBF118DBE19194ECE1F07499F15B20.png" alt="img" style="zoom:80%;" />

<p>最后的等待是因为：</p>
<p><u>保活计时器</u></p>
<p>方便 TCP 服务器发现客户端发生故障，关闭连接减少不必要的等待。</p>
<h3 id="TCP-首部格式"><a href="#TCP-首部格式" class="headerlink" title="TCP 首部格式"></a>TCP 首部格式</h3><p>复位标志位 RST：用来复位 TCP 连接。当 RST = 1 时，表明 TCP 连接出现了异常，必须释放连接再重新建立；RST 置1还用来拒绝一个非法报文段或打开一个 TCP 链接</p>
<hr>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>是干什么的：是计算机网络体系结构的最顶层，是设计和建立计算机网络的最终目的，也是计算机网络中发展最快的部分</p>
<h3 id="客户-服务器方式（C-S）和对等方式（P2P）"><a href="#客户-服务器方式（C-S）和对等方式（P2P）" class="headerlink" title="客户/服务器方式（C/S）和对等方式（P2P）"></a>客户/服务器方式（C/S）和对等方式（P2P）</h3><p>网络应用进程处于网络边缘的不同端系统上，通过彼此间的通信来完成某项任务。网络应用程序在各种端系统上的组织方式和他们之间的关系主要有</p>
<ul>
<li>Client/Server, C/S 方式</li>
</ul>
<p>服务集中型，服务器是服务提供方，总是处于运行状态，等待客户的服务请求。服务器具有固定端口号（HTTP 服务器的默认端口号为 80 ），运行服务器的主机也具有固定的 IP 地址。</p>
<ul>
<li>Peer-to-Peer 方式</li>
</ul>
<p>服务分散型，没有固定的服务请求者和提供者，对等方之间直接通信，P2P 文件共享、即时通信、分布式存储。具有可拓展性，成本更低，不需要庞大的服务器设施和服务器宽带。</p>
<h3 id="动态主机配置-DHCP"><a href="#动态主机配置-DHCP" class="headerlink" title="动态主机配置 DHCP"></a>动态主机配置 DHCP</h3><ul>
<li><p>是什么</p>
<p>动态主机配置 DHCP（Dynamic Host Configuration Protocol）提供了一种机制，允许一台计算机加入新网络时可以自动获取 IP 地址等网络配置信息而不用手工参与。</p>
</li>
<li><p>怎么实现</p>
<p>DHCP DISCOVER : DHCP 发现报文</p>
<p>DHCP OFFER : DHCP 提供报文</p>
<p>DHCP REQUEST : DHCP请求报文</p>
<p>DHCP ACK : DHCP 确认报文</p>
<p>DHCP NACK : DHCP 否认报文</p>
<p>DHCP RELEASE : DHCP 释放报文</p>
</li>
<li><p>基本流程：</p>
<ul>
<li>客户在为获取到 IP 地址时使用地址 0.0.0.0</li>
<li>DHCP 报文在运输层使用 UDP 协议封装，客户使用的 UDP 端口号为68，服务器为 67</li>
</ul>
<p>客户 DISCOVER –&gt; 服务器们 OFFER –&gt;  客户选择，回复 REQUEST –&gt; 相应服务器确认 ACK –&gt; 【开始】</p>
<p>0.5 倍租用期时 重新REQUEST …..</p>
<p>随时解除 IP 地址租约 DHCP RELEASE</p>
</li>
<li><p>DHCP 中继代理</p>
<p>在每一个网络上都设置一个 DHCP 服务器会是 DHCP 服务器太多，因此现在是使每一个网络至少有一个 DHCP 中继代理器（通常是一台路由器），给它配置 DHCP 服务器的 IP 地址，作为各网络中计算机和 DHCP 服务器中间的桥梁</p>
</li>
</ul>
<h3 id="域名系统-DNS"><a href="#域名系统-DNS" class="headerlink" title="域名系统 DNS"></a>域名系统 DNS</h3><ul>
<li>是什么</li>
</ul>
<p>是因特网使用的命名系统，用来把便于人们积极的具有特定含义的主机名（域名），转换为便于机器处理的 IP 地址。</p>
<ul>
<li>分层</li>
</ul>
<p>层次结构的命名树作为主机的名字（域名），并使用分布式的域名系统 DNS ，DNS 使大多数的域名都在本地解析，只有少量需要在因特网上通信，因此效率很高</p>
<p>域名和 IP 地址的映射关系必须保存在域名服务器中，DNS 使用分布在各地的域名服务器来实现域名到 IP 地址的转换</p>
<ul>
<li>域名层级</li>
</ul>
<p>顶级域名 TLD</p>
<p>二级域名</p>
<ul>
<li>域名服务器可分为</li>
</ul>
<p>根域名服务器</p>
<p>顶级域名服务器</p>
<p>权限域名服务器</p>
<p>本地域名服务器</p>
<ul>
<li><p>查询过程</p>
<ul>
<li>递归查询</li>
<li>迭代查询</li>
</ul>
</li>
<li><p>DNS 高速缓存</p>
<p>如果已经有用户查询过某地址，他就会在本地域名服务器上的高速缓存中存在，再次访问时就可以直接查询，无需一层层迭代查询。会到期删除。</p>
<p>许多用户主机在启动时会从本地域名服务器下载域名和 IP 地址的全部的全部数据，维护存放在自己最近使用的域名高速缓存中。</p>
</li>
</ul>
<h3 id="文件传送协议-FTP（File-Transfer-Protocol）"><a href="#文件传送协议-FTP（File-Transfer-Protocol）" class="headerlink" title="文件传送协议 FTP（File Transfer Protocol）"></a>文件传送协议 FTP（File Transfer Protocol）</h3><p>FTP 提供交互的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限</p>
<p>和 屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算之间传送文件</p>
<ul>
<li>FTP 服务器 FTP 客户端之间建立<u>两个并行的 TCP 连接</u>：</li>
</ul>
<p><u>数据连接</u>：用于文件传输，在每次文件传输时才建立，传输结束关闭</p>
<p>默认情况下， FTP 进行使用 TCP 21 端口进行控制连接，FTP 20 端口进行数据连接。但是是否使用TCP 20 端口建立数据连接与传输模式相关，主动方式使用 TCP 20 端口，被动方式由服务器和客户端自行协商决定。</p>
<h3 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h3><p>邮局协议 POP</p>
<p>因特网邮件访问协议 IMAP</p>
<h3 id="万维网"><a href="#万维网" class="headerlink" title="万维网"></a>万维网</h3><ul>
<li>是什么</li>
</ul>
<p>万维网并非特殊的计算机网络，是一个大规模、联机式地信息储藏所，是运行在因特网上的一个<u>分布式应用</u>，利用页支架的超链接将不同的网站的网页链接成一张逻辑上的信息网。</p>
<h4 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h4><p>为了方便地访问在世界范围的文档，万维网使用统一资源定位符 URL 来指明因特网上任何种类“资源”的位置。URL 的一般形式由以下四个部分组成：</p>
<p>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</p>
<ul>
<li>www 的文档：HTML、CSS、 JS</li>
</ul>
<h4 id="超文本传输协议-HTTP"><a href="#超文本传输协议-HTTP" class="headerlink" title="*超文本传输协议 HTTP *"></a>*<em>超文本传输协议 HTTP *</em></h4><ul>
<li><p>是什么</p>
<p>HTTP 定义了浏览器（即万维网客户进程）怎样向万维网服务器请求万维网文档，以及万维网如何把万维网文档传给浏览器</p>
</li>
<li><p>HTTP/1.0</p>
<p>采用非连续连接方式，每次浏览器要请求一个文件都要与服务器建立 TCP 连接，当收到响应后就立即关闭连接。为了减少时延，浏览器通常建立多个并行的 TCP 连接同时请求多个对象，但这样会大量占用万维网服务器资源。</p>
</li>
<li><p>HTTP/1.1</p>
<p>非持续连接，在该方式下，万维网在发送响应后仍然保持这条连接，还可以继续交换报文。并布局向在传送同一个页面上引用的对象，而是这些文档都在一个服务器上就行。</p>
<p>可以使用流水线方式工作。</p>
</li>
<li><p>HTTP 报文格式</p>
<p>  请求报文</p>
<p>  <img src="C:%5CUsers%5Chz%5CAppData%5CRoaming%5CTencent%5CUsers%5C1440961573%5CQQ%5CWinTemp%5CRichOle%5C@$DX2%5BGNJIWOER2%5D$ML%25L" alt="img">)M.png)</p>
<p>  响应报文</p>
</li>
</ul>
<h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><ul>
<li><p>是什么</p>
<p>早期的万维网应用非常简单，仅仅是用户查看存放在不同服务器上的各种静态文档，因此 HTTP 被设计成一种无状态的协议。但是万维网应用复杂了，往往需要万维网服务器能识别用户。而<code>Cookie</code>就是一种对无状态的 HTTP 进行状态化的技术。</p>
</li>
<li><p>工作流程</p>
<ul>
<li>HTTP 请求，建立 TCP 连接，端口号 80</li>
<li>生成 Cookie 识别码，并以此为索引在服务器后端数据库创建一个项目，用来记录该用户该问该网站的各种信息</li>
<li>HTTP 响应，Set-Cookie 字段</li>
<li>用户主机将 Cookie 信息存入文件</li>
<li>再次请求前就可以先从文件中读取 Cookie ，在 HTTP 请求中带上，万维网服务器可以根据 Cookie 索引识别出用户，并返回该用户的个性化网页</li>
</ul>
</li>
</ul>
<h4 id="万维网缓存和代理服务器"><a href="#万维网缓存和代理服务器" class="headerlink" title="万维网缓存和代理服务器"></a>万维网缓存和代理服务器</h4><ul>
<li><p>是什么</p>
<p>万维网中可以通过使用缓存机制提高万维网的效率。万维网缓存又称 Web 缓存，口位于客户机，也可位于中间系统上（代理服务器）</p>
<p>Web 缓存把最近的一些请求和相应暂存在本地磁盘中，当新请求到达时，若发现这个请求与暂时存放的请求相同就不用再按 URL 地址再去因特网访问了。</p>
</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Network/" rel="tag"># Network</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/07/07/class-constructor-prototype/" rel="prev" title="JavaScript 的原型和继承">
      <i class="fa fa-chevron-left"></i> JavaScript 的原型和继承
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/07/15/happy-birthday/" rel="next" title="happy birthday">
      happy birthday <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一些术语和概念"><span class="nav-number">1.1.</span> <span class="nav-text">一些术语和概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三种交换方式"><span class="nav-number">1.2.</span> <span class="nav-text">三种交换方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比特、速率单位及换算"><span class="nav-number">1.3.</span> <span class="nav-text">比特、速率单位及换算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#计算机网络体系的分层"><span class="nav-number">1.4.</span> <span class="nav-text">计算机网络体系的分层</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#物理层"><span class="nav-number">2.</span> <span class="nav-text">物理层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本概念们"><span class="nav-number">2.1.</span> <span class="nav-text">基本概念们</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#传输媒体"><span class="nav-number">2.2.</span> <span class="nav-text">传输媒体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#传输方式"><span class="nav-number">2.3.</span> <span class="nav-text">传输方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编码与调制"><span class="nav-number">2.4.</span> <span class="nav-text">编码与调制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#常用编码"><span class="nav-number">2.4.1.</span> <span class="nav-text">常用编码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#混合调制"><span class="nav-number">2.5.</span> <span class="nav-text">混合调制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#信道的极限容量"><span class="nav-number">2.6.</span> <span class="nav-text">信道的极限容量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据链路层"><span class="nav-number">3.</span> <span class="nav-text">数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本问题"><span class="nav-number">3.1.</span> <span class="nav-text">基本问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#封装成帧"><span class="nav-number">3.1.1.</span> <span class="nav-text">封装成帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#差错检测"><span class="nav-number">3.1.2.</span> <span class="nav-text">差错检测</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可靠传输"><span class="nav-number">3.1.3.</span> <span class="nav-text">可靠传输</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#点对点协议PPP（point-to-point-protocol）"><span class="nav-number">3.2.</span> <span class="nav-text">点对点协议PPP（point-to-point protocol）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用广播信道（共享式局域网）"><span class="nav-number">3.3.</span> <span class="nav-text">使用广播信道（共享式局域网）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#媒体接入控制MAC-Medium-Access-Control"><span class="nav-number">3.3.1.</span> <span class="nav-text">媒体接入控制MAC(Medium Access Control)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#CSMA-CD协议"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">CSMA&#x2F;CD协议</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CSMA-CA协议"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">CSMA&#x2F;CA协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MAC-地址、IP-地址、APR-协议"><span class="nav-number">3.4.</span> <span class="nav-text">MAC 地址、IP 地址、APR 协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#交换机"><span class="nav-number">3.5.</span> <span class="nav-text">交换机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#虚拟局域网-VALN-概述"><span class="nav-number">3.6.</span> <span class="nav-text">虚拟局域网 VALN 概述</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络层"><span class="nav-number">4.</span> <span class="nav-text">网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概述-1"><span class="nav-number">4.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层提供的两种服务"><span class="nav-number">4.2.</span> <span class="nav-text">网络层提供的两种服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP地址"><span class="nav-number">4.3.</span> <span class="nav-text">IP地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IPv4-地址概述"><span class="nav-number">4.3.1.</span> <span class="nav-text">IPv4 地址概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分类编制的IPv4"><span class="nav-number">4.3.2.</span> <span class="nav-text">分类编制的IPv4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#划分子网"><span class="nav-number">4.3.3.</span> <span class="nav-text">划分子网</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#无分类编址的-IPv4-地址"><span class="nav-number">4.3.4.</span> <span class="nav-text">无分类编址的 IPv4 地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IPv4-地址的应用规划"><span class="nav-number">4.3.5.</span> <span class="nav-text">IPv4 地址的应用规划</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP-数据报的发送和转发过程"><span class="nav-number">4.4.</span> <span class="nav-text">IP 数据报的发送和转发过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#静态路由配置及其可能产生的路由环路问题"><span class="nav-number">4.5.</span> <span class="nav-text">静态路由配置及其可能产生的路由环路问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由选择协议"><span class="nav-number">4.6.</span> <span class="nav-text">路由选择协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#域内：内部网关协议-IGP"><span class="nav-number">4.6.1.</span> <span class="nav-text">域内：内部网关协议 IGP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#域间：外部网关协议-EGP（边界网关协议-BGP）"><span class="nav-number">4.6.2.</span> <span class="nav-text">域间：外部网关协议 EGP（边界网关协议 BGP）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv4数据报的首部格式"><span class="nav-number">4.7.</span> <span class="nav-text">IPv4数据报的首部格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网际控制报文协议-ICMP"><span class="nav-number">4.8.</span> <span class="nav-text">网际控制报文协议 ICMP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#虚拟专用网-VPN-和网络地址转换-NAT"><span class="nav-number">4.9.</span> <span class="nav-text">虚拟专用网 VPN 和网络地址转换 NAT</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运输层"><span class="nav-number">5.</span> <span class="nav-text">运输层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#运输层端口号、复用与分用概念"><span class="nav-number">5.1.</span> <span class="nav-text">运输层端口号、复用与分用概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-和-TCP-的对比"><span class="nav-number">5.2.</span> <span class="nav-text">UDP 和 TCP 的对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-的流量控制"><span class="nav-number">5.3.</span> <span class="nav-text">TCP 的流量控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-的拥塞控制"><span class="nav-number">5.4.</span> <span class="nav-text">TCP 的拥塞控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-超时重传时间的选择"><span class="nav-number">5.5.</span> <span class="nav-text">TCP 超时重传时间的选择</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-的运输连接管理"><span class="nav-number">5.6.</span> <span class="nav-text">TCP 的运输连接管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP-连接的建立"><span class="nav-number">5.6.1.</span> <span class="nav-text">TCP 连接的建立</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#三报文握手"><span class="nav-number">5.6.1.1.</span> <span class="nav-text">三报文握手</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#四报文挥手"><span class="nav-number">5.6.1.2.</span> <span class="nav-text">四报文挥手</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-首部格式"><span class="nav-number">5.7.</span> <span class="nav-text">TCP 首部格式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#应用层"><span class="nav-number">6.</span> <span class="nav-text">应用层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#客户-服务器方式（C-S）和对等方式（P2P）"><span class="nav-number">6.1.</span> <span class="nav-text">客户&#x2F;服务器方式（C&#x2F;S）和对等方式（P2P）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态主机配置-DHCP"><span class="nav-number">6.2.</span> <span class="nav-text">动态主机配置 DHCP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#域名系统-DNS"><span class="nav-number">6.3.</span> <span class="nav-text">域名系统 DNS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件传送协议-FTP（File-Transfer-Protocol）"><span class="nav-number">6.4.</span> <span class="nav-text">文件传送协议 FTP（File Transfer Protocol）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#电子邮件"><span class="nav-number">6.5.</span> <span class="nav-text">电子邮件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#万维网"><span class="nav-number">6.6.</span> <span class="nav-text">万维网</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#URL"><span class="nav-number">6.6.1.</span> <span class="nav-text">URL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超文本传输协议-HTTP"><span class="nav-number">6.6.2.</span> <span class="nav-text">*超文本传输协议 HTTP *</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie"><span class="nav-number">6.6.3.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#万维网缓存和代理服务器"><span class="nav-number">6.6.4.</span> <span class="nav-text">万维网缓存和代理服务器</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="WongZit"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">WongZit</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/skylarjiang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;skylarjiang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WongZit</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Oz2yzxrs2lGmIXVQcx46jyu5-gzGzoHsz',
      appKey     : 'AQb4Ky6893MkxyUc5jYyb1BS',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
